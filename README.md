# Trading App Service

## Overview

This project is a trading app service that aggregates
tick data from Binance into OHLC (Open, High, Low, Close)
candlesticks. The service broadcasts real-time candlestick
data via gRPC and stores complete candlesticks in a MySQL
database.

## Features

- Connects to Binance WebSocket API for real-time tick data.
- Aggregates tick data into 1-minute OHLC candlesticks.
- Broadcasts candlestick data using gRPC.
- Stores candlestick data in a MySQL database.
- Containerized with Docker.

## Project Structure

trading-app-service/
├── cmd/
│   └── main.go            # Entry point for the application
├── 
├── internal/
│   ├── aggregator/
│   │   └── aggregator.go       # Tick data aggregator
│   ├── binance/
│   │   └── binance.go          # Binance WebSocket client
│   ├── chart/
│   │   └── chart.go            # Go chart package to render the chart data in UI
│   ├── db/
│   │   ├── db.go               # MySQL database client
│   │   └── schema.sql          # MySQL schema details
│   ├── models/
│   │    └── candle.go          # Models stores common struct
│   ├── proto/
│   │    ├── service.pb.go      # Auto-generated by Protoc command
│   │    ├── service.proto      # gRPC service definition
│   │    └── service_grpc.pb.go # Auto-generated by Protoc command
│   └── server/
│       ├── handlers.go         # Handler to render the chart data in UI
│       └── server.go           # gRPC server details
├──
├── public/
│   ├── css/                    # Basic structure for future use 
│   ├── js/                     # Basic structure for future use
│   └── templates/
│        └── home.html          # Render home UI
├── .env                        # Load the environment variables
├── .gitignore                  # Ignore the directory/files which are not needed or do not want to push
├── docker-compose.yml          # Docker Compose configuration
├── Dockerfile                  # Dockerfile for building the container
├── go.mod                      # Go modules file
├── go.sum                      # Go modules checksum file
├── LICENSE                     # MIT License
└── README.md                   # This README file

## Prerequisites

- Docker and Docker Compose installed
- Go 1.20 or later
- MySQL database

## Setup

### 1. Clone the Repository
    
    git clone https://github.com/rinkesh7070/trading-app-service.git
    cd trading-app-service

### 2. Configure MySQL

    -- Create the database if it doesn't exist
      CREATE DATABASE IF NOT EXISTS trading_data;

    -- Use the database
      USE trading_data;
      
    -- Create the table to store OHLC candlestick data
      CREATE TABLE IF NOT EXISTS candlesticks (
      id BIGINT AUTO_INCREMENT PRIMARY KEY,
      symbol VARCHAR(10) NOT NULL,
      timestamp DATETIME NOT NULL,
      open DOUBLE NOT NULL,
      high DOUBLE NOT NULL,
      low DOUBLE NOT NULL,
      close DOUBLE NOT NULL,
      volume DOUBLE NOT NULL,
      UNIQUE KEY unique_candle (symbol, timestamp)
      );
      
    -- Indexes to speed up queries
      CREATE INDEX idx_symbol ON candlesticks(symbol);
      CREATE INDEX idx_timestamp ON candlesticks(timestamp);

### 3. Build and Run with Docker

Run the following command to build and start the
application along with the MySQL database:

```bash
docker-compose up --build
```
This command will build the Docker image, start the
application container, and set up a MySQL container. The
application will be accessible on port 50051.

### 4. Running the Service Locally (Without Docker)

If you prefer to run the service locally without Docker:

1. Install Dependencies:
```bash
go mod download
```
2. Run the Application:
```bash
go run cmd/main.go
```
Ensure your MySQL database is correctly configured and
running before starting the application.

# gRPC Service
The service exposes a gRPC API for streaming candlestick data.

# Service Definition
Refer to the internal/proto/service.proto file for details 
on the service and message types.
Use the provided `internal/proto/service.proto` file to generate clients in your preferred language.

```bash
protoc --go_out=. --go-grpc_opt=require_unimplemented_servers=false --go-grpc_out=. internal/proto/service.proto
```
## Usage

- The service will automatically start fetching ticks from Binance for `BTCUSDT`, `ETHUSDT`, and `PEPEUSDT`.
- Candlesticks are aggregated and broadcast via gRPC on port `50051`.
- Candlesticks are also stored in `trading_data.db`.

# Contributing
Feel free to open issues or submit pull requests to improve the 
service. Ensure any contributions adhere to the existing coding 
style and include appropriate tests.

# License
This project is licensed under the MIT License. 
See the LICENSE file for details.

# Contact
For questions or feedback, please reach out to 
`rinkeshbhutwala@gmail.com`


### Explanation

- **Overview**: Briefly describes the project's purpose and capabilities.
- **Features**: Lists the key features of the service.
- **Project Structure**: Provides a high-level view of the directory structure and files.
- **Prerequisites**: Details the requirements needed to run the project.
- **Setup**: Provides instructions for setting up the project, including cloning, database configuration, Docker setup, and running locally.
- **gRPC Service**: Describes the gRPC API and includes a sample client code.
- **Service Definition**: Describes the service definition and proto details and how to generate clients.
- **Usage**: Describes the usage of the service.
- **Contributing**: Invites contributions and outlines the process for submitting improvements.
- **License**: Specifies the project's licensing information.
- **Contact**: Provides contact information for further questions or feedback.

This README is designed to be comprehensive, helping users understand and get started with the trading app service quickly.



